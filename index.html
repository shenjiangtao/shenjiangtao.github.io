<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <title>JTSHEN</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 0; padding: 0; display: flex; }
    nav { background: #333; padding: 10px; }
    nav a { color: white; margin: 0 15px; text-decoration: none; }
    nav a:hover { text-decoration: underline; }
    section { padding: 40px; flex: 1; }
    h1, h2 { color: #333; }
    footer { background: #f2f2f2; text-align: center; padding: 20px; margin-top: 40px; }
    ul { list-style-type: none; padding: 0; }
    li { margin: 8px 0; }
    #content { padding: 20px; background: #fafafa; border-top: 1px solid #ddd; }
    pre { background: #eee; padding: 10px; overflow-x: auto; }
    #content img { border: 1px solid #ccc; margin: 10px 0; }
    #toc { width: 250px; background: #f9f9f9; border-left: 1px solid #ddd; padding: 20px; overflow-y: auto; }
    #toc h3 { margin-top: 0; display: flex; justify-content: space-between; align-items: center; }
    #toc ul { list-style: none; padding-left: 0; }
    #toc li { margin: 5px 0; }
    #toc a { text-decoration: none; color: #007acc; }
    #toc a:hover { text-decoration: underline; }
    .hidden { display: none; }
    .toggle-btn { cursor: pointer; font-size: 14px; color: #007acc; background: none; border: none; }
  </style>
  <!-- å¼•å…¥ marked.js -->
  <script src="./marked.min.js"></script>
  <!-- å¼•å…¥ highlight.js -->
  <link rel="stylesheet" href="./github.min.css">
  <script src="./highlight.min.js"></script>
</head>
<body>

  <div style="flex:1;">
    <!-- å¯¼èˆªæ  -->
    <nav>
      <a href="#about">å…³äºæˆ‘</a>
      <a href="#articles">æ–‡ç« åˆ—è¡¨</a>
      <a href="#contact">è”ç³»æ–¹å¼</a>
    </nav>

    <!-- ä¸ªäººä»‹ç» -->
    <section id="about">
      <h1>ä½ å¥½ï¼Œæˆ‘æ˜¯æ²ˆæ±Ÿæ¶›</h1>
      <p>æ›¾ä¸»å¯¼è¿‡è‡ªç ”èŠ¯ç‰‡æ•´ä½“æ–¹æ¡ˆçš„é›†æˆä¸äº¤ä»˜ï¼Œå…·å¤‡ä»æ¶æ„è®¾è®¡åˆ°è½åœ°å®ç°çš„å®Œæ•´ç»éªŒã€‚è¿‡å»ï¼Œæˆ‘è¿˜æ‹…ä»»è¿‡å¹¿ç”µæ€»å±€æŠ€æœ¯å§”å‘˜ä¼šçš„æ ‡å‡†å®¡è®¢å§”å‘˜ï¼Œå‚ä¸è¡Œä¸šæ ‡å‡†çš„åˆ¶å®šä¸ä¼˜åŒ–ï¼Œç§¯ç´¯äº†ä¸°å¯Œçš„è·¨é¢†åŸŸæŠ€æœ¯ä¸ç®¡ç†ç»éªŒã€‚</p>
      <p>ç›®å‰ï¼Œæˆ‘ä¸“æ³¨äºæ±½è½¦è‡ªåŠ¨é©¾é©¶çš„ç³»ç»Ÿé›†æˆå·¥ä½œï¼Œè‡´åŠ›äºå°†èŠ¯ç‰‡è®¾è®¡ã€ç³»ç»Ÿæ¶æ„ä¸æ™ºèƒ½é©¾é©¶æŠ€æœ¯æ·±åº¦ç»“åˆï¼Œæ¨åŠ¨ä¸‹ä¸€ä»£æ™ºèƒ½å‡ºè¡Œè§£å†³æ–¹æ¡ˆçš„è½åœ°ã€‚æˆ‘çš„ç›®æ ‡æ˜¯é€šè¿‡æŠ€æœ¯åˆ›æ–°ä¸è·¨ç•Œèåˆï¼Œä¸ºäº§ä¸šå‘å±•è´¡çŒ®æ›´å…·å‰ç»æ€§çš„æˆæœã€‚</p>
    </section>

    <!-- æ–‡ç« åˆ—è¡¨ -->
    <section id="articles">
      <h2>æˆ‘çš„æ–‡ç« </h2>
      <ul>
        <li><a href="posts/cmos/CMOS.md" class="md-link">CMOSå›¾åƒä¼ æ„Ÿå™¨</a></li>
      </ul>
    </section>

    <!-- è”ç³»æ–¹å¼ -->
    <section id="contact">
      <h2>è”ç³»æ–¹å¼</h2>
      <p>ğŸ“§ é‚®ç®±: <a href="mailto:shenjiangtao@gmail.com">shenjiangtao@gmail.com</a></p>
      <p>ğŸ’¼ GitHub: <a href="https://github.com/shenjiangtao" target="_blank">github.com/shenjiangtao</a></p>
    </section>

    <!-- Markdown æ¸²æŸ“åŒºåŸŸ -->
    <section id="content">
      <h2>ç‚¹å‡»ä¸Šæ–¹æ–‡ç« é“¾æ¥åŠ è½½ Markdown å†…å®¹</h2>
    </section>

    <!-- é¡µè„š -->
    <footer>
      <p>Â© 2025 æˆ‘çš„ä¸ªäººä¸»é¡µ</p>
    </footer>
  </div>

  <!-- ç›®å½•åŒºåŸŸ -->
  <aside id="toc">
    <h3>
      ç›®å½•
      <button id="toggle-toc" class="toggle-btn">æŠ˜å </button>
    </h3>
    <ul id="toc-list"></ul>
  </aside>

  <!-- è„šæœ¬ï¼šåŠ è½½å¹¶æ¸²æŸ“ Markdownï¼Œå¹¶ç”Ÿæˆç›®å½• -->
  <script>
    marked.setOptions({
      highlight: function(code, lang) {
        if (hljs.getLanguage(lang)) {
          return hljs.highlight(code, { language: lang }).value;
        }
        return hljs.highlightAuto(code).value;
      }
    });

    // ç›®å½•æŠ˜å /å±•å¼€åŠŸèƒ½
    const toggleBtn = document.getElementById('toggle-toc');
    const tocList = document.getElementById('toc-list');
    toggleBtn.addEventListener('click', () => {
      tocList.classList.toggle('hidden');
      toggleBtn.textContent = tocList.classList.contains('hidden') ? 'å±•å¼€' : 'æŠ˜å ';
    });

    document.querySelectorAll('.md-link').forEach(link => {
      link.addEventListener('click', async function(e) {
        e.preventDefault();
        const url = this.getAttribute('href');
        try {
          const response = await fetch(url);
          let text = await response.text();
          let html = marked.parse(text);

          // æ›¿æ¢ Pandoc çš„ {width="..."} {height="..."} è¯­æ³•ä¸º style å±æ€§
          html = html.replace(/(<img[^>]+>)\{([^}]+)\}/g, (match, imgTag, attrs) => {
            let style = '';
            const widthMatch = attrs.match(/width="([^"]+)"/);
            const heightMatch = attrs.match(/height="([^"]+)"/);
            if (widthMatch) style += `width:${widthMatch[1]};`;
            if (heightMatch) style += `height:${heightMatch[1]};`;
            return imgTag.replace(/\/?>$/, ` style="${style}">`);
          });

          // ä¿®æ­£å›¾ç‰‡è·¯å¾„
          const basePath = url.substring(0, url.lastIndexOf('/'));
          html = html.replace(/<img src="\.\/*media\/([^"]+)"/g, (match, filename) => {
            return `<img src="${basePath}/media/${filename}"`;
          });

          // æ¸²æŸ“ Markdown
          document.getElementById('content').innerHTML = html;

          // è‡ªåŠ¨ç”Ÿæˆç›®å½•
          tocList.innerHTML = '';
          const headings = document.querySelectorAll('#content h1, #content h2, #content h3');
          headings.forEach((heading, index) => {
            const id = 'heading-' + index;
            heading.id = id;
            const li = document.createElement('li');
            li.style.marginLeft = heading.tagName === 'H2' ? '10px' : heading.tagName === 'H3' ? '20px' : '0';
            li.innerHTML = `<a href="#${id}">${heading.textContent}</a>`;
            tocList.appendChild(li);
          });
        } catch (err) {
          document.getElementById('content').innerHTML = `<p style="color:red;">åŠ è½½å¤±è´¥: ${err}</p>`;
        }
      });
    });
  </script>

</body>
</html>

